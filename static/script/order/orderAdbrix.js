var orderAdbrix={purchaseEventProc:function(){var adbrixEventParam={};var adbrixProductList=[];if($("div.order-product-list").length>0)$("div.order-product-list").each(function(){adbrixProductList.push(orderAdbrix.purchaseGoodsInfo($(this)))});var orderSale=adbrixProductList.reduce(function(orderSaleAmt,adbrixProduct){var adbrixProductAmt=adbrixProduct.price;orderSaleAmt+=parseInt(adbrixProductAmt);return orderSaleAmt},0);var orderDiscount=adbrixProductList.reduce(function(orderDiscount,adbrixProduct){var adbrixProductDiscount=
adbrixProduct.discount;orderDiscount+=parseInt(adbrixProductDiscount);return orderDiscount},0);var ordNo=$("input[name=ordNoForAbx]").val();var ordDeliveryCharge=$("input[name=ordDlvrChargeAmt]").val()==undefined?0:parseInt($("input[name=ordDlvrChargeAmt]").val());adbrixEventParam.productList=adbrixProductList;adbrixEventParam.orderId=ordNo;adbrixEventParam.orderSale=orderSale;adbrixEventParam.discount=orderDiscount;adbrixEventParam.deliver_charge=ordDeliveryCharge;var adbrixEventParamJsonStr=JSON.stringify(adbrixEventParam);
window.secapp.purchase(adbrixEventParamJsonStr)},refundEventProc:function(){var adbrixRefundEventParam={};var adbrixRefundProductList=[];if($("div[name=cancelAdbrix]").length>0)$("div[name=cancelAdbrix]").each(function(){adbrixRefundProductList.push(orderAdbrix.refundGoodsInfo($(this)))});var orderSale=adbrixRefundProductList.reduce(function(orderSaleAmt,adbrixProduct){var adbrixProductAmt=adbrixProduct.price;orderSaleAmt+=parseInt(adbrixProductAmt);return orderSaleAmt},0);var orderDiscount=adbrixRefundProductList.reduce(function(orderDiscount,
adbrixProduct){var adbrixProductDiscount=adbrixProduct.discount;orderDiscount+=parseInt(adbrixProductDiscount);return orderDiscount},0);var ordNo=$("input[name=ordNo]").val();var ordDeliveryCharge=$("input[name=ordDlvrChargeAmt]").val()==undefined?"0":$("input[name=ordDlvrChargeAmt]").val();var penaltyCharge=0;adbrixRefundEventParam.productList=adbrixRefundProductList;adbrixRefundEventParam.orderId=ordNo;adbrixRefundEventParam.penaltyCharge=penaltyCharge;var adbrixEventParamJsonStr=JSON.stringify(adbrixRefundEventParam);
window.secapp.refund(adbrixEventParamJsonStr)},cancelAddToCart:function(){var cartTpCd=$("input[id='cartTpCd']").val();var eventName="cancel_addtocart";var curChannel=$("#curChannel").val();if($("#delButtonType").val()=="cartDeleteBtn"){var categoryNmPathStr=$("#adbrixCategoryNmPath").val();var categoryNmPathArr=[];var categoryNmPart_1="";var categoryNmPart_2="";var categoryNmPart_3="";if(categoryNmPathStr!=""){var categoryNmPathArr$0=categoryNmPathStr.split(";");categoryNmPart_1=categoryNmPathArr$0[0]==
undefined?"":categoryNmPathArr$0[0];categoryNmPart_2=categoryNmPathArr$0[1]==undefined?"":categoryNmPathArr$0[1];categoryNmPart_3=categoryNmPathArr$0[2]==undefined?"":categoryNmPathArr$0[2]}if(curChannel=="WEB"||curChannel=="ANDROID_WEB"||curChannel=="NO_ANDROID_WEB")adbrix.event.send(eventName,{"product_name":$("#adbrixGoodsNm").val(),"price":parseInt($("#adbrixSaleAmt").val()),"category":$.trim(categoryNmPart_1)});else{var eventParam={eventName:eventName,attrModel:{product_name:$("#adbrixGoodsNm").val(),
price:parseInt($("#adbrixSaleAmt").val()),category:$.trim(categoryNmPart_1)}};var eventParamJsonStr=JSON.stringify(eventParam);window.secapp.customEvent(JSON.stringify(eventParam))}}else if($("#delButtonType").val()=="cartHeaderBtn")if(orderCommon.stGbCd=="10"&&typeof cartTpCd!=="undefined"&&cartTpCd!="")$("input:checkbox[name=cartIds][data-type="+cartTpCd+"]:checked").each(function(k,v){var categoryNmPathStr=$(this).attr("data-category-nm-path");var categoryNmPathArr=[];var categoryNmPart_1="";var categoryNmPart_2=
"";var categoryNmPart_3="";if(categoryNmPathStr!=""){var categoryNmPathArr$1=categoryNmPathStr.split(";");categoryNmPart_1=categoryNmPathArr$1[0]==undefined?"":categoryNmPathArr$1[0];categoryNmPart_2=categoryNmPathArr$1[1]==undefined?"":categoryNmPathArr$1[1];categoryNmPart_3=categoryNmPathArr$1[2]==undefined?"":categoryNmPathArr$1[2]}if(curChannel=="WEB"||curChannel=="ANDROID_WEB"||curChannel=="NO_ANDROID_WEB")adbrix.event.send(eventName,{"product_name":$(this).attr("data-goods-nm"),"price":parseInt($(this).attr("data-sale-amt")),
"category":$.trim(categoryNmPart_1)});else{var eventParam$2={eventName:eventName,attrModel:{product_name:$(this).attr("data-goods-nm"),price:parseInt($(this).attr("data-sale-amt")),category:$.trim(categoryNmPart_1)}};var eventParamJsonStr$3=JSON.stringify(eventParam$2);window.secapp.customEvent(JSON.stringify(eventParam$2))}})},refundEventProcForWeb:function(){if(!window.adbrix._abxCore.isInitialized)window.adbrix.init({appkey:"0nCtQ3s60km0zcXUGeZZBQ",webSecretkey:"IU54Ulr2xUawNnSUwBHrkw"}).then(setTimeout(function(){orderAdbrix.refundEventProcForWebBizLogic()},
1E3));else orderAdbrix.refundEventProcForWebBizLogic()},refundEventProcForWebBizLogic:function(){var adbrixProductList=[];var ordNo=$("input[name=ordNo]").val();var penaltyCharge=0;if($("div[name=cancelAdbrix]").length>0)$("div[name=cancelAdbrix]").each(function(){var refundGoodsInfoObj=orderAdbrix.refundGoodsInfo($(this));var refundGoodsCategorys=adbrix.commerceAttr.categories(refundGoodsInfoObj.category,refundGoodsInfoObj.categorySub);var refundGoods=adbrix.commerceAttr.product(refundGoodsInfoObj.productId,
refundGoodsInfoObj.productName,refundGoodsInfoObj.price,refundGoodsInfoObj.quantity,refundGoodsInfoObj.discount,"KRW",refundGoodsCategorys);adbrixProductList.push(refundGoods)});adbrix.commerce.refund(ordNo,adbrixProductList,penaltyCharge)},purchaseEventProcForWeb:function(){if(!window.adbrix._abxCore.isInitialized)window.adbrix.init({appkey:"0nCtQ3s60km0zcXUGeZZBQ",webSecretkey:"IU54Ulr2xUawNnSUwBHrkw"}).then(setTimeout(function(){orderAdbrix.purchaseEventProcForWebBizLogic()},1E3));else adbrix.onInitialized(function adbrixInitialized(){orderAdbrix.purchaseEventProcForWebBizLogic()})},
purchaseEventProcForWebBizLogic:function(){var adbrixProductList=[];var productList=[];if($("div.order-product-list").length>0)$("div.order-product-list").each(function(){var purchaseGoodsInfoObj=orderAdbrix.purchaseGoodsInfo($(this));productList.push(purchaseGoodsInfoObj);var purchaseGoodsCategorys=adbrix.commerceAttr.categories(purchaseGoodsInfoObj.category,purchaseGoodsInfoObj.categorySub);var purchaseGoods=adbrix.commerceAttr.product(purchaseGoodsInfoObj.productId,purchaseGoodsInfoObj.productName,
purchaseGoodsInfoObj.price,purchaseGoodsInfoObj.quantity,purchaseGoodsInfoObj.discount,"KRW",purchaseGoodsCategorys);adbrixProductList.push(purchaseGoods)});var ordNo=$("input[name=ordNoForAbx]").val();var orderSale=productList.reduce(function(orderSaleAmt,product){var productAmt=product.price;orderSaleAmt+=parseInt(productAmt);return orderSaleAmt},0);var orderDiscount=productList.reduce(function(orderDiscount,product){var productDiscount=product.discount;orderDiscount+=parseInt(productDiscount);
return orderDiscount},0);var ordDeliveryCharge=$("input[name=ordDlvrChargeAmt]").val()==undefined?0:parseInt($("input[name=ordDlvrChargeAmt]").val());var payMeansCd=$("#payMeansCd").val();var paymentMethod="";if(payMeansCd=="110")paymentMethod="CreditCard";else paymentMethod="ETC";adbrix.common.purchase(ordNo,adbrixProductList,orderSale,orderDiscount,ordDeliveryCharge,paymentMethod)},refundGoodsInfo:function(refundGoodsObj){var refundGoodsInfoObj={};var productId="";var productName="";var price="";
var prmtDcAmt="";var cpDcAmt="";var discount="";var quantity="";var refundGoodsCtgs=[];productId=$(refundGoodsObj).find("input[name=abxMdlCd]").val();productName=$(refundGoodsObj).find("input[name=abxGoodsNm]").val();price=$(refundGoodsObj).find("input[name=abxSaleAmt]").val();prmtDcAmt=$(refundGoodsObj).find("input[name=abxPrmtDcAmt]").val();cpDcAmt=$(refundGoodsObj).find("input[name=abxCpDcAmt]").val();discount=String(parseInt(prmtDcAmt)+parseInt(cpDcAmt));quantity=$(refundGoodsObj).find("input[name=abxOrdQty]").val();
refundGoodsInfoObj.productId=productId;refundGoodsInfoObj.productName=productName;refundGoodsInfoObj.price=parseInt(price);refundGoodsInfoObj.discount=parseInt(discount);refundGoodsInfoObj.quantity=parseInt(quantity);refundGoodsCtgs=orderAdbrix.refundGoodsCategories(refundGoodsObj);if(refundGoodsCtgs.length!=0){refundGoodsInfoObj.category=refundGoodsCtgs[0]==undefined?"":refundGoodsCtgs[0].trim();refundGoodsInfoObj.categorySub=refundGoodsCtgs[1]==undefined?"":refundGoodsCtgs[1].trim()}return refundGoodsInfoObj},
refundGoodsCategories:function(refundGoods){var categoryPathStr=$(refundGoods).find("input[name=abxCategoryPath]").val();var categoryPathArr=[];if(categoryPathStr!="")categoryPathArr=categoryPathStr.split(";");return categoryPathArr},purchaseGoodsInfo:function(purchaseGoodsObj){var purchaseGoodsInfoObj={};var productId="";var productName="";var price="";var prmtDcAmt="";var cpDcAmt="";var discount="";var quantity="";var purchaseGoodsCtgs=[];productId=$(purchaseGoodsObj).find("input[name=mdlCode]").val();
productName=$(purchaseGoodsObj).find("input[name=goodsNm]").val();price=$(purchaseGoodsObj).find("input[name=saleAmt]").val();prmtDcAmt=$(purchaseGoodsObj).find("input[name=prmtDcAmt]").val();cpDcAmt=$(purchaseGoodsObj).find("input[name=cpDcAmt]").val();discount=String(parseInt(prmtDcAmt)+parseInt(cpDcAmt));quantity=$(purchaseGoodsObj).find("input[name=ordQty]").val();purchaseGoodsInfoObj.productId=productId;purchaseGoodsInfoObj.productName=productName;purchaseGoodsInfoObj.price=parseInt(price);purchaseGoodsInfoObj.discount=
parseInt(discount);purchaseGoodsInfoObj.quantity=parseInt(quantity);purchaseGoodsCtgs=orderAdbrix.purchaseGoodsCategories(purchaseGoodsObj);if(purchaseGoodsCtgs.length!=0){purchaseGoodsInfoObj.category=purchaseGoodsCtgs[0]==undefined?"":purchaseGoodsCtgs[0].trim();purchaseGoodsInfoObj.categorySub=purchaseGoodsCtgs[1]==undefined?"":purchaseGoodsCtgs[1].trim()}return purchaseGoodsInfoObj},purchaseGoodsCategories:function(purchaseGoods){var categoryPathStr=$(purchaseGoods).find("input[name=categoryPath]").val();
var categoryPathArr=[];if(categoryPathStr!="")categoryPathArr=categoryPathStr.split(";");return categoryPathArr}};
